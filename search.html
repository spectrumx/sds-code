<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpectrumX - Search | SpectrumX Data System</title>
    <link rel="icon" href="images/favicon.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Skip links for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#navigation" class="skip-link">Skip to navigation</a>
    <a href="#search-form" class="skip-link">Skip to search form</a>
    <a href="#search-results" class="skip-link">Skip to search results</a>
    
    <!-- ARIA live region for dynamic content -->
    <div class="aria-live" aria-live="polite" aria-atomic="true" id="aria-live-region"></div>
    
    <div class="top-gradient-bar"></div>

    <header class="site-header">
        <nav class="navbar navbar-expand-xl navbar-light bg-white" id="navigation" role="navigation" aria-label="Main navigation">
            <div class="container">
                <a class="navbar-brand d-flex align-items-center" href="#">
                    <img src="images/Logo.png" alt="NSF and SpectrumX Logo" class="logo">
                    <span class="vr mx-3 d-none d-md-inline" aria-hidden="true"></span>
                    <span class="system-name d-none d-md-inline">SpectrumX Data System</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="typography.html">Typography</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="components.html">Components</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="forms.html">Forms</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="layout.html">Layout</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="search.html">Search</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarUserDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                jdoe
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarUserDropdown">
                                <li><a class="dropdown-item" href="#">My Profile</a></li>
                                <li><a class="dropdown-item" href="#">Settings</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#">Logout</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mt-4" id="main-content" role="main">
        <h1>Search Results</h1>
        <p class="lead">An example of a search form and a results table with accessible interactions.</p>
        <hr>

        <form id="search-form" role="search" aria-label="Search datasets">
            <div class="row g-3 mb-3">
                <div class="col-sm-8 col-md-6">
                    <label for="searchInput" class="visually-hidden">Search datasets</label>
                    <div class="input-group">
                        <input type="search" class="form-control" id="searchInput" placeholder="Search datasets..." aria-describedby="searchHelp">
                        <button class="btn btn-primary" type="submit">Search</button>
                    </div>
                    <div id="searchHelp" class="form-text">Enter keywords to search for datasets</div>
                </div>
            </div>
            <fieldset>
                <legend class="fs-6 mb-2">Filters</legend>
                <div class="d-flex flex-wrap">
                    <div class="form-check me-3">
                        <input class="form-check-input" type="checkbox" value="" id="filterArchived">
                        <label class="form-check-label" for="filterArchived">
                            Archived Datasets
                        </label>
                    </div>
                    <div class="form-check me-3">
                        <input class="form-check-input" type="checkbox" value="" id="filterProprietary">
                        <label class="form-check-label" for="filterProprietary">
                            Proprietary Data
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="filterPublic" checked>
                        <label class="form-check-label" for="filterPublic">
                            Public Data
                        </label>
                    </div>
                </div>
            </fieldset>
        </form>

        <hr>

        <div id="search-results">
            <div class="d-flex justify-content-between align-items-baseline">
                <h2>Results</h2>
                <span id="results-count" aria-live="polite">12 datasets found</span>
            </div>
            <div class="table-responsive">
                <table class="table table-striped table-hover table-fixed-layout" role="table" aria-labelledby="search-results-heading">
                    <caption id="search-results-heading" class="visually-hidden">Search results for datasets</caption>
                    <thead>
                        <tr>
                            <th scope="col" role="columnheader">#</th>
                            <th scope="col" role="columnheader" class="sortable" data-sort="name">Dataset Name <i class="bi bi-caret-down-fill sort-icon"></i></th>
                            <th scope="col" role="columnheader" class="sortable" data-sort="author">Author <i class="bi bi-caret-down-fill sort-icon"></i></th>
                            <th scope="col" role="columnheader" class="sortable" data-sort="date">Date Added <i class="bi bi-caret-down-fill sort-icon"></i></th>
                            <th scope="col" role="columnheader">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Rows will be injected by JavaScript -->
                    </tbody>
                </table>
            </div>
            <nav aria-label="Search results pagination">
                <ul class="pagination justify-content-center" id="pagination-controls">
                    <!-- Pagination will be injected by JavaScript -->
                </ul>
            </nav>
        </div>
    </main>

    <!-- Details Modal -->
    <div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="detailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="detailsModalLabel">Dataset Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <dl>
                        <dt>Dataset Name:</dt>
                        <dd id="modalDatasetName"></dd>
                        <dt>Author:</dt>
                        <dd id="modalAuthor"></dd>
                        <dt>Date Added:</dt>
                        <dd id="modalDate"></dd>
                        <dt>Description:</dt>
                        <dd id="modalDescription"></dd>
                    </dl>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Download Dataset</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="site-footer bg-dark text-light mt-5" role="contentinfo">
        <div class="container text-center py-5">
            <div class="row">
                <div class="col-md-8 mx-auto">
                    <p class="footer-text">NSF SpectrumX is an NSF Spectrum Innovation Center funded via Award 2132700 operated under cooperative agreement by the University of Notre Dame.</p>
                    <p class="copyright-text mb-0 mt-4">&copy;2025 SpectrumX | All Rights Reserved</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const detailsModal = new bootstrap.Modal(document.getElementById('detailsModal'));
            const modalDatasetName = document.getElementById('modalDatasetName');
            const modalAuthor = document.getElementById('modalAuthor');
            const modalDate = document.getElementById('modalDate');
            const modalDescription = document.getElementById('modalDescription');
            const liveRegion = document.getElementById('aria-live-region');

            // --- Data ---
            const datasets = [
                { id: 1, name: "Atmospheric Noise Measurements", author: "J. Doe", date: "2024-01-15", description: "A comprehensive dataset of atmospheric noise measurements taken over a six-month period." },
                { id: 2, name: "5G Spectrum Analysis", author: "A. Smith", date: "2024-02-20", description: "Analysis of 5G spectrum usage in dense urban environments." },
                { id: 3, name: "Rural Broadband Deployment Data", author: "S. Jones", date: "2024-03-10", description: "Data related to the deployment and performance of broadband internet in rural areas." },
                { id: 4, name: "Satellite Communication Logs", author: "M. Garcia", date: "2023-11-28", description: "Logs from satellite communications over the Atlantic." },
                { id: 5, name: "IoT Device Signal Strength", author: "L. Chen", date: "2024-04-05", description: "Signal strength data from various IoT devices in a smart city setup." },
                { id: 6, name: "Radio Telescope Observations", author: "P. Williams", date: "2023-09-12", description: "Raw observation data from a radio telescope array." },
                { id: 7, name: "Sub-GHz Band Usage", author: "T. Abebe", date: "2024-01-30", description: "Monitoring data of the sub-GHz frequency bands." },
                { id: 8, name: "Wi-Fi Congestion Study", author: "F. Dubois", date: "2023-12-19", description: "Data from a study on Wi-Fi congestion in public spaces." },
                { id: 9, name: "Cognitive Radio Testbed", author: "S. Patel", date: "2024-05-01", description: "Results from a cognitive radio testbed experiment." },
                { id: 10, name: "Dynamic Spectrum Sharing", author: "H. Kim", date: "2023-10-15", description: "Simulation data for dynamic spectrum sharing algorithms." },
                { id: 11, name: "Microwave Link Fading Data", author: "Z. Nowak", date: "2024-02-08", description: "Fading characteristics of a microwave communication link." },
                { id: 12, name: "Public Safety Band Monitoring", author: "J. Doe", date: "2024-04-22", description: "Monitoring data from public safety frequency bands." }
            ];

            // --- State ---
            let currentPage = 1;
            const rowsPerPage = 5;
            let sortColumn = 'id';
            let sortDirection = 'asc';

            const tableBody = document.querySelector('table tbody');
            const paginationControls = document.getElementById('pagination-controls');
            const resultsCountEl = document.getElementById('results-count');

            function renderTable() {
                tableBody.innerHTML = ''; // Clear existing rows
                
                // Sort data
                const sortedData = [...datasets].sort((a, b) => {
                    let aValue = a[sortColumn];
                    let bValue = b[sortColumn];

                    if (sortColumn === 'date') {
                        return sortDirection === 'asc' ? new Date(aValue) - new Date(bValue) : new Date(bValue) - new Date(aValue);
                    }

                    if (aValue < bValue) return sortDirection === 'asc' ? -1 : 1;
                    if (aValue > bValue) return sortDirection === 'asc' ? 1 : -1;
                    return 0;
                });

                // Paginate data
                const startIndex = (currentPage - 1) * rowsPerPage;
                const endIndex = startIndex + rowsPerPage;
                const paginatedData = sortedData.slice(startIndex, endIndex);

                paginatedData.forEach(dataset => {
                    const row = document.createElement('tr');
                    row.setAttribute('role', 'row');
                    row.innerHTML = `
                        <th scope="row" role="rowheader">${dataset.id}</th>
                        <td><a href="#" aria-label="View details for ${dataset.name}">${dataset.name}</a></td>
                        <td>${dataset.author}</td>
                        <td>${dataset.date}</td>
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-sm btn-light dropdown-toggle btn-icon-dropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Actions for ${dataset.name}">
                                    <i class="bi bi-three-dots-vertical" aria-hidden="true"></i>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><button class="dropdown-item" type="button">View</button></li>
                                    <li><button class="dropdown-item" type="button">Download</button></li>
                                </ul>
                            </div>
                        </td>
                    `;
                    
                    // Add event listener for modal
                    row.addEventListener('click', (event) => {
                        if (event.target.closest('.dropdown')) {
                            event.stopPropagation();
                            return;
                        }
                        showModal(dataset);
                    });
                    
                    // Make dropdown buttons functional for demo
                    const dropdownButtons = row.querySelectorAll('.dropdown-item');
                    dropdownButtons.forEach(btn => {
                        btn.addEventListener('click', (event) => {
                            event.stopPropagation();
                            const action = btn.textContent.toLowerCase();
                            handleSearchAction(action, dataset.id);
                        });
                    });
                    
                    tableBody.appendChild(row);
                });
                
                resultsCountEl.textContent = `${datasets.length} datasets found`;
                updateSortIcons();
            }

            function renderPagination() {
                paginationControls.innerHTML = '';
                const pageCount = Math.ceil(datasets.length / rowsPerPage);

                if (pageCount <= 1) return;

                // Previous button
                const prevLi = document.createElement('li');
                prevLi.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
                prevLi.innerHTML = `<a class="page-link" href="#" data-page="${currentPage - 1}" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>`;
                paginationControls.appendChild(prevLi);

                // Page numbers
                for (let i = 1; i <= pageCount; i++) {
                    const li = document.createElement('li');
                    li.className = `page-item ${i === currentPage ? 'active' : ''}`;
                    li.innerHTML = `<a class="page-link" href="#" data-page="${i}">${i}</a>`;
                    paginationControls.appendChild(li);
                }

                // Next button
                const nextLi = document.createElement('li');
                nextLi.className = `page-item ${currentPage === pageCount ? 'disabled' : ''}`;
                nextLi.innerHTML = `<a class="page-link" href="#" data-page="${currentPage + 1}" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>`;
                paginationControls.appendChild(nextLi);
            }
            
            function updateSortIcons() {
                document.querySelectorAll('.sortable').forEach(header => {
                    const icon = header.querySelector('.sort-icon');
                    if (header.dataset.sort === sortColumn) {
                        icon.className = `sort-icon bi ${sortDirection === 'asc' ? 'bi-caret-up-fill' : 'bi-caret-down-fill'}`;
                        header.setAttribute('aria-sort', sortDirection === 'asc' ? 'ascending' : 'descending');
                    } else {
                        icon.className = 'sort-icon bi bi-caret-down-fill';
                        header.removeAttribute('aria-sort');
                    }
                });
            }

            function showModal(dataset) {
                modalDatasetName.textContent = dataset.name;
                modalAuthor.textContent = dataset.author;
                modalDate.textContent = dataset.date;
                modalDescription.textContent = dataset.description;
                detailsModal.show();
            }

            function handleSearchAction(action, id) {
                if (liveRegion) {
                    liveRegion.textContent = `Action '${action}' triggered for dataset ID ${id}. This is a demo.`;
                }
                console.log(`Action: ${action}, ID: ${id}`);
            }
            
            // Event Listeners
            document.querySelectorAll('.sortable').forEach(header => {
                header.addEventListener('click', () => {
                    const newSortColumn = header.dataset.sort;
                    if (sortColumn === newSortColumn) {
                        sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
                    } else {
                        sortColumn = newSortColumn;
                        sortDirection = 'asc';
                    }
                    currentPage = 1;
                    renderTable();
                    renderPagination();
                });
            });
            
            paginationControls.addEventListener('click', (event) => {
                event.preventDefault();
                const target = event.target.closest('.page-link');
                if (target && !target.parentElement.classList.contains('disabled')) {
                    const newPage = parseInt(target.dataset.page, 10);
                    if (newPage !== currentPage) {
                        currentPage = newPage;
                        renderTable();
                        renderPagination();
                    }
                }
            });

            // Initial render
            renderTable();
            renderPagination();
        });
    </script>
</body>
</html> 